<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HATE Studio Cinema</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüé¨%3C/text%3E%3C/svg%3E" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .page-section { display: none; }
    .active-page { display: block; }
  </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-gray-800 shadow-md sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row items-center justify-between">
      <div class="flex items-center justify-between w-full md:w-auto">
        <h1 class="text-2xl font-bold text-red-500">HATE Studio Cinema</h1>
        <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
          </svg>
        </button>
      </div>
      <nav id="main-nav" class="hidden md:flex flex-grow mt-4 md:mt-0 flex-col md:flex-row items-center justify-end space-y-2 md:space-y-0 md:space-x-6">
        <a href="#home" class="nav-link cursor-pointer transition-colors duration-200 text-orange-500">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="#films" class="nav-link cursor-pointer transition-colors duration-200 text-white hover:text-orange-500">–§–∏–ª—å–º—ã</a>
        <a href="#series" class="nav-link cursor-pointer transition-colors duration-200 text-white hover:text-orange-500">–°–µ—Ä–∏–∞–ª—ã</a>
        <a href="#bookmarks" class="nav-link cursor-pointer transition-colors duration-200 text-white hover:text-orange-500">–ó–∞–∫–ª–∞–¥–∫–∏</a>
        <a href="#profile" class="nav-link cursor-pointer transition-colors duration-200 text-white hover:text-orange-500">–ü—Ä–æ—Ñ–∏–ª—å</a>
        <a href="#login" id="login-btn" class="nav-link cursor-pointer bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">–í–æ–π—Ç–∏</a>
        <a href="#" id="logout-btn" class="hidden cursor-pointer bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors">–í—ã—Ö–æ–¥</a>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-grow container mx-auto px-4 py-8">

    <!-- Home Page Section -->
    <section id="home-page" class="page-section active-page">
      <h2 class="text-3xl md:text-5xl font-bold text-orange-500 mb-6">–û–Ω–ª–∞–π–Ω-–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä</h2>
      <p class="text-gray-300 text-lg mb-8">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –∫–∏–Ω–æ!</p>
      <div id="new-movies-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <!-- Movie cards will be rendered here -->
      </div>
    </section>

    <!-- All Films Page Section -->
    <section id="films-page" class="page-section">
      <h2 class="text-3xl md:text-5xl font-bold text-red-500 mb-6">–í—Å–µ —Ñ–∏–ª—å–º—ã</h2>
      <div id="all-movies-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <!-- All movie cards will be rendered here -->
      </div>
    </section>

    <!-- Movie Detail Page Section -->
    <section id="movie-detail-page" class="page-section">
      <div id="movie-detail-content" class="bg-gray-800 p-8 rounded-lg shadow-lg">
        <!-- Movie details will be rendered here -->
      </div>
    </section>

    <!-- Bookmarks Page Section -->
    <section id="bookmarks-page" class="page-section">
      <h2 class="text-3xl md:text-5xl font-bold text-red-500 mb-6">–í–∞—à–∏ –∑–∞–∫–ª–∞–¥–∫–∏</h2>
      <div id="bookmarks-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        <!-- Bookmarked movie cards will be rendered here -->
      </div>
    </section>

    <!-- Login Page Section -->
    <section id="login-page" class="page-section">
      <div class="flex items-center justify-center p-6">
        <div class="bg-gray-800 p-8 rounded-lg shadow-lg w-full max-w-sm">
          <h2 class="text-2xl font-bold text-center text-white mb-6">–í—Ö–æ–¥</h2>
          <button id="google-signin-btn" class="w-full bg-gray-700 text-white py-3 rounded-md font-bold flex items-center justify-center space-x-2 hover:bg-gray-600 transition-colors">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12.24 10.23c-.27-.85-.85-1.51-1.74-2.06v-3.32h5.13c.09.84.28 2.05.52 3.52h-.01c1.23 2.11 1.83 3.97 1.83 6.64 0 4.1-2.9 7.03-7.58 7.03-5.26 0-8.2-4.14-8.2-8.31s2.94-8.31 8.2-8.31c2.4 0 4.14.86 5.16 1.84l2.5-2.5c-1.5-1.61-3.66-2.5-6.66-2.5-5.5 0-9.45 4.38-9.45 9.45s3.95 9.45 9.45 9.45c5.38 0 9.25-4.1 9.25-9.13 0-.67-.08-1.3-.2-1.89z" />
            </svg>
            <span>–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Profile Page Section -->
    <section id="profile-page" class="page-section">
      <div class="flex items-start justify-center p-6">
        <div class="bg-gray-800 p-8 rounded-lg shadow-lg w-full max-w-2xl">
          <h2 class="text-2xl font-bold text-white mb-6">–í–∞—à –ü—Ä–æ—Ñ–∏–ª—å</h2>
          <div id="profile-details" class="space-y-4">
            <!-- Profile details will be rendered here -->
          </div>
        </div>
      </div>
    </section>

    <!-- Search Input and Results -->
    <div class="fixed bottom-0 left-0 right-0 p-4 bg-gray-800 shadow-lg md:hidden">
      <div class="relative">
        <input
          type="text"
          id="search-input"
          placeholder="–ü–æ–∏—Å–∫..."
          class="w-full p-3 pl-10 rounded-full bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-orange-500"
        />
        <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
        </svg>
      </div>
      <div id="search-results-mobile" class="mt-2 bg-gray-700 rounded-lg shadow-lg max-h-64 overflow-y-auto hidden">
        <!-- Search results will be rendered here -->
      </div>
    </div>

  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 py-4 text-center text-gray-400">
    <p class="text-sm">&copy; 2025 HATE Studio Cinema. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </footer>

  <!-- Firebase scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc, onSnapshot, collection, query, where, addDoc, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // Global variables
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    let currentUser = null;
    let allMovies = [];
    let userBookmarks = [];

    // Utility function to navigate pages
    function navigateTo(pageId) {
      document.querySelectorAll('.page-section').forEach(section => {
        section.classList.remove('active-page');
      });
      document.getElementById(pageId).classList.add('active-page');
      
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('text-orange-500');
        link.classList.add('text-white', 'hover:text-orange-500');
      });
      document.querySelector(`[href="#${pageId.replace('-page', '')}"]`).classList.add('text-orange-500');
      document.querySelector(`[href="#${pageId.replace('-page', '')}"]`).classList.remove('text-white');
    }

    // Function to render a single movie card
    function renderMovieCard(movie, isBookmark = false) {
      const card = document.createElement('div');
      card.className = "bg-gray-800 rounded-lg shadow-lg overflow-hidden w-64 md:w-80 flex-shrink-0 cursor-pointer";
      card.innerHTML = `
        <img src="${movie.poster}" alt="${movie.title}" class="w-full h-80 object-cover" onerror="this.src='https://placehold.co/600x400/1f2937/d1d5db?text=No+Image';">
        <div class="p-4 text-white">
          <h3 class="text-xl font-bold">${movie.title}</h3>
          <p class="text-gray-400 mt-2">${movie.year}</p>
          <div class="mt-4 flex items-center space-x-2">
            <button class="add-bookmark-btn bg-yellow-500 text-black p-2 rounded-md hover:bg-yellow-600 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" />
              </svg>
            </button>
            <button class="remove-bookmark-btn bg-red-600 text-white p-2 rounded-md hover:bg-red-700 transition-colors ${!isBookmark ? 'hidden' : ''}">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9 2a1 1 0 00-1 1v2H5a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-3V3a1 1 0 10-2 0v2H9V3a1 1 0 00-1-1zM7 7h6v9H7V7z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
        </div>
      `;

      card.addEventListener('click', () => renderMovieDetailPage(movie.id));
      
      const addBookmarkBtn = card.querySelector('.add-bookmark-btn');
      addBookmarkBtn.addEventListener('click', (e) => {
        e.stopPropagation(); // Prevent card click event
        handleAddBookmark(movie)
      });
      
      const removeBookmarkBtn = card.querySelector('.remove-bookmark-btn');
      if (isBookmark) {
        removeBookmarkBtn.addEventListener('click', (e) => {
            e.stopPropagation(); // Prevent card click event
            handleRemoveBookmark(movie.id)
        });
      }
      
      return card;
    }

    // Function to render movie detail page
    async function renderMovieDetailPage(movieId) {
      navigateTo('movie-detail-page');
      const movieDetailContent = document.getElementById('movie-detail-content');
      movieDetailContent.innerHTML = '<p class="text-center text-white">–ó–∞–≥—Ä—É–∑–∫–∞...</p>';

      const movie = allMovies.find(m => m.id === movieId);

      if (!movie) {
        movieDetailContent.innerHTML = '<p class="text-center text-white">–§–∏–ª—å–º –Ω–µ –Ω–∞–π–¥–µ–Ω.</p>';
        return;
      }

      movieDetailContent.innerHTML = `
        <div class="flex flex-col md:flex-row items-start md:space-x-8">
          <img src="${movie.poster}" alt="${movie.title}" class="w-full md:w-1/3 rounded-lg shadow-lg mb-4 md:mb-0" onerror="this.src='https://placehold.co/600x400/1f2937/d1d5db?text=No+Image';">
          <div class="flex-grow">
            <h2 class="text-4xl font-bold text-orange-500 mb-2">${movie.title}</h2>
            <p class="text-gray-400 mb-4">${movie.year}</p>
            <p class="text-white mb-4">${movie.description || '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.'}</p>
            <div class="space-y-2 text-gray-300">
              <p><strong>–†–µ–∂–∏—Å—Å–µ—Ä:</strong> ${movie.director || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</p>
              <p><strong>–ê–∫—Ç–µ—Ä—ã:</strong> ${movie.actors || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</p>
              <p><strong>–ñ–∞–Ω—Ä:</strong> ${movie.genre || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</p>
              <p><strong>–†–µ–π—Ç–∏–Ω–≥:</strong> ${movie.rating || '–ù–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞'}</p>
            </div>
            <div class="mt-6 flex space-x-4">
              <button class="bg-red-600 text-white px-6 py-3 rounded-md hover:bg-red-700 transition-colors">
                –°–º–æ—Ç—Ä–µ—Ç—å
              </button>
              <button class="add-bookmark-btn bg-yellow-500 text-black px-6 py-3 rounded-md hover:bg-yellow-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" />
                </svg>
                –ó–∞–∫–ª–∞–¥–∫–∞
              </button>
            </div>
          </div>
        </div>
        <div id="comments-section" class="mt-12">
          <h3 class="text-2xl font-bold text-white mb-4">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
          <div id="comments-list" class="space-y-4">
            <!-- Comments will be rendered here -->
          </div>
          <div class="mt-6">
            <textarea id="comment-input" class="w-full p-4 rounded-lg bg-gray-700 text-white placeholder-gray-400" rows="4" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea>
            <button id="add-comment-btn" class="mt-4 bg-orange-500 text-white px-6 py-3 rounded-md hover:bg-orange-600 transition-colors">
              –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
            </button>
          </div>
        </div>
      `;

      // Handle bookmark button click on detail page
      document.querySelector('#movie-detail-page .add-bookmark-btn').addEventListener('click', () => handleAddBookmark(movie));

      // Add comments functionality
      const commentsRef = collection(db, `/artifacts/${appId}/public/data/movies/${movieId}/comments`);
      onSnapshot(commentsRef, (snapshot) => {
        const commentsList = document.getElementById('comments-list');
        commentsList.innerHTML = '';
        snapshot.docs.forEach(doc => {
          const comment = doc.data();
          const commentDiv = document.createElement('div');
          commentDiv.className = 'bg-gray-700 p-4 rounded-lg';
          commentDiv.innerHTML = `
            <p class="text-gray-300 font-bold">${comment.user}:</p>
            <p class="text-white mt-2">${comment.text}</p>
          `;
          commentsList.appendChild(commentDiv);
        });
      });

      document.getElementById('add-comment-btn').addEventListener('click', async () => {
        const commentInput = document.getElementById('comment-input');
        if (!currentUser) {
          const modalMessage = "–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç.";
          const modalHtml = `<div id="alert-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50"><div class="bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-sm text-center"><p class="text-white mb-4">${modalMessage}</p><button onclick="document.getElementById('alert-modal').remove()" class="bg-red-600 text-white px-4 py-2 rounded-md">OK</button></div></div>`;
          document.body.insertAdjacentHTML('beforeend', modalHtml);
          return;
        }
        if (commentInput.value.trim() !== '') {
          await addDoc(commentsRef, {
            user: currentUser?.displayName || '–ê–Ω–æ–Ω–∏–º',
            text: commentInput.value,
            createdAt: new Date().toISOString()
          });
          commentInput.value = '';
        }
      });
    }

    // Function to handle adding bookmarks
    async function handleAddBookmark(movie) {
      if (!currentUser) {
        navigateTo('login-page');
        return;
      }
      try {
        const bookmarkRef = doc(db, `/artifacts/${appId}/users/${currentUser.uid}/bookmarks`, movie.id);
        await setDoc(bookmarkRef, { ...movie });
        const modalMessage = "–§–∏–ª—å–º –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∑–∞–∫–ª–∞–¥–∫–∏.";
        const modalHtml = `<div id="alert-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50"><div class="bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-sm text-center"><p class="text-white mb-4">${modalMessage}</p><button onclick="document.getElementById('alert-modal').remove()" class="bg-red-600 text-white px-4 py-2 rounded-md">OK</button></div></div>`;
        document.body.insertAdjacentHTML('beforeend', modalHtml);
      } catch (e) {
        console.error("Error adding bookmark: ", e);
      }
    }

    // Function to handle removing bookmarks
    async function handleRemoveBookmark(movieId) {
      if (!currentUser) return;
      try {
        const bookmarkRef = doc(db, `/artifacts/${appId}/users/${currentUser.uid}/bookmarks`, movieId);
        await deleteDoc(bookmarkRef);
      } catch (e) {
        console.error("Error removing bookmark: ", e);
      }
    }

    // Render movies to a specific container
    function renderMovies(containerId, moviesToRender, isBookmark = false) {
      const container = document.getElementById(containerId);
      container.innerHTML = ''; // Clear container
      if (moviesToRender.length === 0) {
        container.innerHTML = `<p class="text-gray-400">–§–∏–ª—å–º–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>`;
      } else {
        moviesToRender.forEach(movie => {
          container.appendChild(renderMovieCard(movie, isBookmark));
        });
      }
    }

    // Handle authentication state changes
    onAuthStateChanged(auth, async (user) => {
      currentUser = user;
      const loginBtn = document.getElementById('login-btn');
      const logoutBtn = document.getElementById('logout-btn');
      if (user) {
        console.log("User is signed in:", user.uid);
        loginBtn.classList.add('hidden');
        logoutBtn.classList.remove('hidden');
        document.getElementById('profile-details').innerHTML = `
          <div class="flex items-center space-x-4">
            <img src="${user.photoURL || 'https://via.placeholder.com/100'}" alt="Profile" class="w-20 h-20 rounded-full" />
            <div>
              <p class="text-gray-400">UID: <span class="text-white break-all">${user.uid}</span></p>
              <p class="text-gray-400">–°—Ç–∞—Ç—É—Å: <span class="text-red-500">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span></p>
            </div>
          </div>
          <p class="text-gray-400">Email: <span class="text-white">${user.email || '–ù–µ —É–∫–∞–∑–∞–Ω'}</span></p>
        `;
        // Fetch bookmarks for the signed-in user
        onSnapshot(collection(db, `/artifacts/${appId}/users/${user.uid}/bookmarks`), (snapshot) => {
          userBookmarks = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
          if (document.getElementById('bookmarks-page').classList.contains('active-page')) {
             renderMovies('bookmarks-list', userBookmarks, true);
          }
        });
      } else {
        console.log("User is signed out.");
        loginBtn.classList.remove('hidden');
        logoutBtn.classList.add('hidden');
        document.getElementById('profile-details').innerHTML = `<p class="text-white">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å.</p>`;
        userBookmarks = [];
        if (document.getElementById('bookmarks-page').classList.contains('active-page')) {
           renderMovies('bookmarks-list', userBookmarks);
        }
      }
    });

    // Initial sign-in with custom token or anonymously
    window.onload = async () => {
      try {
        if (typeof __initial_auth_token !== 'undefined') {
          await signInWithCustomToken(auth, __initial_auth_token);
        } else {
          await signInAnonymously(auth);
        }
        
        // Fetch and render movies on page load
        const moviesRef = collection(db, `/artifacts/${appId}/public/data/movies`);
        const moviesSnap = await getDocs(moviesRef);
        allMovies = moviesSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        
        renderMovies('new-movies-list', allMovies.slice(0, 4));
        renderMovies('all-movies-list', allMovies);
      } catch (e) {
        console.error("Initialization error:", e);
      }
    };

    // Google Sign-in
    document.getElementById('google-signin-btn').addEventListener('click', async () => {
      const provider = new GoogleAuthProvider();
      try {
        await signInWithPopup(auth, provider);
      } catch (error) {
        console.error("Google Sign-In Error:", error);
      }
    });

    // Logout
    document.getElementById('logout-btn').addEventListener('click', async () => {
      try {
        await signOut(auth);
        navigateTo('home-page');
      } catch (error) {
        console.error("Logout Error:", error);
      }
    });

    // Navigation
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const pageId = e.target.getAttribute('href').substring(1) + '-page';
        navigateTo(pageId);
      });
    });

    // Search functionality
    const searchInput = document.getElementById('search-input');
    const searchResultsDiv = document.getElementById('search-results-mobile');
    
    searchInput.addEventListener('input', (e) => {
      const query = e.target.value.toLowerCase();
      if (query.length > 0) {
        const filteredMovies = allMovies.filter(movie => movie.title.toLowerCase().includes(query));
        searchResultsDiv.innerHTML = '';
        if (filteredMovies.length > 0) {
          filteredMovies.forEach(movie => {
            const resultItem = document.createElement('div');
            resultItem.className = 'p-3 border-b border-gray-600 hover:bg-gray-600 cursor-pointer';
            resultItem.textContent = movie.title;
            resultItem.addEventListener('click', () => {
              renderMovieDetailPage(movie.id);
              searchResultsDiv.classList.add('hidden');
              searchInput.value = '';
            });
            searchResultsDiv.appendChild(resultItem);
          });
          searchResultsDiv.classList.remove('hidden');
        } else {
          searchResultsDiv.innerHTML = '<p class="p-3 text-gray-400">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>';
          searchResultsDiv.classList.remove('hidden');
        }
      } else {
        searchResultsDiv.classList.add('hidden');
      }
    });
    
    // Toggle mobile menu
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const navMenu = document.getElementById('main-nav');

    mobileMenuButton.addEventListener('click', () => {
      navMenu.classList.toggle('hidden');
    });

    // Hide mobile menu on link click
    navMenu.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', () => {
        if (!navMenu.classList.contains('hidden')) {
          navMenu.classList.add('hidden');
        }
      });
    });

  </script>

</body>
</html>
